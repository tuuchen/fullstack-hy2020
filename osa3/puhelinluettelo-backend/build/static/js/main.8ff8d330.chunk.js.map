{"version":3,"sources":["components/Filter.js","components/Header.js","components/PersonForm.js","components/Button.js","components/Persons.js","components/Notification.js","services/PersonService.js","App.js","index.js"],"names":["Filter","filterName","handleFilterChange","value","onChange","Header","header","PersonForm","addPerson","newName","newNumber","handlePersonChange","handleNumberChange","onSubmit","type","Button","handleClick","text","onClick","Persons","namesToShow","deletePerson","map","person","number","key","id","name","Notification","message","className","baseUrl","axios","get","then","response","data","newObject","post","put","delete","App","useState","persons","setPersons","setNewName","setNewNumber","setFilterName","setNamesToShow","setMessage","messageClass","setMessageClass","timeoutCounter","setTimeoutCounter","useEffect","PersonService","console","log","updatePersons","notificationMessage","timer","setTimeout","clearTimeout","val","clearNewPerson","e","target","filter","toLowerCase","includes","preventDefault","personObject","NameExists","some","window","confirm","indexOfnewName","findIndex","i","personId","updatedPerson","catch","error","concat","n","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.8ff8d330.chunk.js","sourcesContent":["import React from 'react';\r\n\r\nconst Filter = ({ filterName, handleFilterChange }) => {\r\n  return (\r\n    <div>\r\n      filter by name <input value={filterName} onChange={handleFilterChange} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Filter;\r\n","import React from 'react';\r\n\r\nconst Header = ({ header }) => {\r\n  return <h2>{header}</h2>;\r\n};\r\n\r\nexport default Header;\r\n","import React from 'react';\r\n\r\nconst PersonForm = ({\r\n  addPerson,\r\n  newName,\r\n  newNumber,\r\n  handlePersonChange,\r\n  handleNumberChange,\r\n}) => {\r\n  return (\r\n    <>\r\n      <h2>Add a new</h2>\r\n      <form onSubmit={addPerson}>\r\n        <div>\r\n          name: <input value={newName} onChange={handlePersonChange} />\r\n        </div>\r\n        <div>\r\n          number: <input value={newNumber} onChange={handleNumberChange} />\r\n        </div>\r\n        <div>\r\n          <button type=\"submit\">add</button>\r\n        </div>\r\n      </form>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default PersonForm;\r\n","import React from 'react';\r\n\r\nconst Button = ({ handleClick, text }) => {\r\n  return <button onClick={handleClick}>{text}</button>;\r\n};\r\n\r\nexport default Button;\r\n","import React from 'react';\r\nimport Button from './Button';\r\n\r\nconst Persons = ({ namesToShow, deletePerson }) => {\r\n  return (\r\n    <>\r\n      <h2>Numbers</h2>\r\n      <div>\r\n        {namesToShow.map((person) => {\r\n          if (!person.number) person.number = '(no number)';\r\n          return (\r\n            <p key={person.id}>\r\n              {person.name}, {person.number}{' '}\r\n              <Button\r\n                handleClick={deletePerson(person.id, person.name)}\r\n                text={'delete'}\r\n              />\r\n            </p>\r\n          );\r\n        })}\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Persons;\r\n","import React from 'react';\r\n\r\nconst Notification = ({ message, className }) => {\r\n  if (message === null) {\r\n    return null;\r\n  }\r\n\r\n  return <div className={className}>{message}</div>;\r\n};\r\n\r\nexport default Notification;\r\n","import axios from 'axios';\r\n\r\n/* Dev * /\r\n\r\n// URL for json server\r\n// const baseUrl = 'http://localhost:3001/persons';\r\n\r\n// URL for local backend\r\n// const baseUrl = 'http://localhost:3001/api/persons';\r\n\r\n/* Deployed */\r\n\r\nconst baseUrl = '/api/persons';\r\n\r\nconst getAll = () => {\r\n  const request = axios.get(baseUrl);\r\n  return request.then((response) => response.data);\r\n};\r\n\r\nconst create = (newObject) => {\r\n  const request = axios.post(baseUrl, newObject);\r\n  return request.then((response) => response.data);\r\n};\r\n\r\nconst update = (id, newObject) => {\r\n  const request = axios.put(`${baseUrl}/${id}`, newObject);\r\n  return request.then((response) => response.data);\r\n};\r\n\r\nconst remove = (id) => {\r\n  return axios.delete(`${baseUrl}/${id}`);\r\n};\r\n\r\n// ES6\r\nexport default { getAll, create, update, remove };\r\n\r\n/* export default {\r\n  getAll: getAll,\r\n  create: create,\r\n  update: update,\r\n}; */\r\n","import React, { useState, useEffect } from 'react';\r\nimport Filter from './components/Filter';\r\nimport Header from './components/Header';\r\nimport PersonForm from './components/PersonForm';\r\nimport Persons from './components/Persons';\r\nimport Notification from './components/Notification';\r\nimport PersonService from './services/PersonService';\r\n\r\nconst App = () => {\r\n  const [persons, setPersons] = useState([]);\r\n  const [newName, setNewName] = useState('');\r\n  const [newNumber, setNewNumber] = useState('');\r\n  const [filterName, setFilterName] = useState('');\r\n  const [namesToShow, setNamesToShow] = useState(persons);\r\n  const [message, setMessage] = useState('');\r\n  const [messageClass, setMessageClass] = useState('');\r\n  const [timeoutCounter, setTimeoutCounter] = useState('');\r\n\r\n  useEffect(() => {\r\n    PersonService.getAll().then((response) => {\r\n      console.log(response);\r\n      updatePersons(response);\r\n    });\r\n  }, []);\r\n\r\n  const addPerson = (e) => {\r\n    e.preventDefault();\r\n\r\n    const personObject = {\r\n      name: newName,\r\n      number: newNumber,\r\n    };\r\n\r\n    const NameExists = persons.some((person) => person.name === newName);\r\n\r\n    if (!newName) return;\r\n\r\n    if (!NameExists) {\r\n      PersonService.create(personObject)\r\n        .then((response) => {\r\n          notificationMessage(\r\n            `${response.name} added to phonebook!`,\r\n            'success'\r\n          );\r\n          console.log(response);\r\n          updatePersons(persons.concat(response));\r\n          clearNewPerson();\r\n        })\r\n        .catch((error) => {\r\n          console.log('Failure! ', error.response);\r\n          notificationMessage(error.response.data.error, 'error');\r\n        });\r\n      return;\r\n    }\r\n\r\n    if (window.confirm(`${newName} already exists, update phone number?`)) {\r\n      const indexOfnewName = persons.findIndex((i) => i.name === newName);\r\n      const personId = persons[indexOfnewName].id;\r\n      PersonService.update(personId, personObject)\r\n        .then((response) => {\r\n          notificationMessage(`Updated ${response.name}!`, 'success');\r\n          const updatedPerson = persons.map((person) =>\r\n            person.id !== personId ? person : response\r\n          );\r\n          updatePersons(updatedPerson);\r\n          clearNewPerson();\r\n        })\r\n        .catch((error) => {\r\n          console.log('Failure! ', error.response);\r\n          notificationMessage(error.response.data.error, 'error');\r\n        });\r\n    }\r\n  };\r\n\r\n  const handlePersonChange = (e) => {\r\n    setNewName(e.target.value);\r\n  };\r\n\r\n  const handleNumberChange = (e) => {\r\n    setNewNumber(e.target.value);\r\n  };\r\n\r\n  const handleFilterChange = (e) => {\r\n    setFilterName(e.target.value);\r\n    setNamesToShow(\r\n      persons.filter((person) =>\r\n        person.name.toLowerCase().includes(e.target.value.toLowerCase())\r\n      )\r\n    );\r\n  };\r\n\r\n  const handlePersonRemove = (id, name) => (e) => {\r\n    if (window.confirm(`Delete ${name}?`)) {\r\n      PersonService.remove(id)\r\n        .then(() => {\r\n          console.log(`Removed ${name}`);\r\n          notificationMessage(`Removed ${name}`, 'success');\r\n          updatePersons(persons.filter((n) => n.id !== id));\r\n          clearNewPerson();\r\n        })\r\n        .catch((error) => {\r\n          console.log('Failure! ', error);\r\n        });\r\n    }\r\n  };\r\n\r\n  const notificationMessage = (message, className) => {\r\n    const timer = setTimeout(() => {\r\n      setMessageClass(null);\r\n      setMessage(null);\r\n    }, 8000);\r\n    clearTimeout(timeoutCounter);\r\n    setTimeoutCounter(timer);\r\n    setMessageClass(className);\r\n    setMessage(message);\r\n  };\r\n\r\n  const updatePersons = (val) => {\r\n    setPersons(val);\r\n    setNamesToShow(val);\r\n  };\r\n\r\n  const clearNewPerson = () => {\r\n    setNewName('');\r\n    setNewNumber('');\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Header header=\"Phonebook\" />\r\n      <Notification className={messageClass} message={message} />\r\n      <Filter filterName={filterName} handleFilterChange={handleFilterChange} />\r\n      <PersonForm\r\n        addPerson={addPerson}\r\n        newName={newName}\r\n        newNumber={newNumber}\r\n        handlePersonChange={handlePersonChange}\r\n        handleNumberChange={handleNumberChange}\r\n      />\r\n      <Persons namesToShow={namesToShow} deletePerson={handlePersonRemove} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n"],"sourceRoot":""}